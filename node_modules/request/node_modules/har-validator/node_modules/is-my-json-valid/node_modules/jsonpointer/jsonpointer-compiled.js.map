{"version":3,"sources":["jsonpointer.js"],"names":[],"mappings":"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","file":"jsonpointer-compiled.js","sourcesContent":["var hasExcape = /~/\nvar escapeMatcher = /~[01]/g\nfunction escapeReplacer (m) {\n  switch (m) {\n    case '~1': return '/'\n    case '~0': return '~'\n  }\n  throw new Error('Invalid tilde escape: ' + m)\n}\n\nfunction untilde (str) {\n  if (!hasExcape.test(str)) return str\n  return str.replace(escapeMatcher, escapeReplacer)\n}\n\nfunction setter (obj, pointer, value) {\n  var part\n  var hasNextPart\n\n  for (var p = 1, len = pointer.length; p < len;) {\n    part = untilde(pointer[p++])\n    hasNextPart = len > p\n\n    if (typeof obj[part] === 'undefined') {\n      // support setting of /-\n      if (Array.isArray(obj) && part === '-') {\n        part = obj.length\n      }\n\n      // support nested objects/array when setting values\n      if (hasNextPart) {\n        if ((pointer[p] !== '' && pointer[p] < Infinity) || pointer[p] === '-') obj[part] = []\n        else obj[part] = {}\n      }\n    }\n\n    if (!hasNextPart) break\n    obj = obj[part]\n  }\n\n  var oldValue = obj[part]\n  if (value === undefined) delete obj[part]\n  else obj[part] = value\n  return oldValue\n}\n\nfunction compilePointer (pointer) {\n  if (typeof pointer === 'string') {\n    pointer = pointer.split('/')\n    if (pointer[0] === '') return pointer\n    throw new Error('Invalid JSON pointer.')\n  } else if (Array.isArray(pointer)) {\n    return pointer\n  }\n\n  throw new Error('Invalid JSON pointer.')\n}\n\nfunction get (obj, pointer) {\n  if (typeof obj !== 'object') throw new Error('Invalid input object.')\n  pointer = compilePointer(pointer)\n  var len = pointer.length\n  if (len === 1) return obj\n\n  for (var p = 1; p < len;) {\n    obj = obj[untilde(pointer[p++])]\n    if (len === p) return obj\n    if (typeof obj !== 'object') return undefined\n  }\n}\n\nfunction set (obj, pointer, value) {\n  if (typeof obj !== 'object') throw new Error('Invalid input object.')\n  pointer = compilePointer(pointer)\n  if (pointer.length === 0) throw new Error('Invalid JSON pointer for set.')\n  return setter(obj, pointer, value)\n}\n\nfunction compile (pointer) {\n  var compiled = compilePointer(pointer)\n  return {\n    get: function (object) {\n      return get(object, compiled)\n    },\n    set: function (object, value) {\n      return set(object, compiled, value)\n    }\n  }\n}\n\nexports.get = get\nexports.set = set\nexports.compile = compile\n"]}
{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["var genobj = require('generate-object-property')\nvar genfun = require('generate-function')\nvar jsonpointer = require('jsonpointer')\nvar xtend = require('xtend')\nvar formats = require('./formats')\n\nvar get = function(obj, additionalSchemas, ptr) {\n\n  var visit = function(sub) {\n    if (sub && sub.id === ptr) return sub\n    if (typeof sub !== 'object' || !sub) return null\n    return Object.keys(sub).reduce(function(res, k) {\n      return res || visit(sub[k])\n    }, null)\n  }\n\n  var res = visit(obj)\n  if (res) return res\n\n  ptr = ptr.replace(/^#/, '')\n  ptr = ptr.replace(/\\/$/, '')\n\n  try {\n    return jsonpointer.get(obj, decodeURI(ptr))\n  } catch (err) {\n    var end = ptr.indexOf('#')\n    var other\n    // external reference\n    if (end !== 0) {\n      // fragment doesn't exist.\n      if (end === -1) {\n        other = additionalSchemas[ptr]\n      } else {\n        var ext = ptr.slice(0, end)\n        other = additionalSchemas[ext]\n        var fragment = ptr.slice(end).replace(/^#/, '')\n        try {\n          return jsonpointer.get(other, fragment)\n        } catch (err) {}\n      }\n    } else {\n      other = additionalSchemas[ptr]\n    }\n    return other || null\n  }\n}\n\nvar formatName = function(field) {\n  field = JSON.stringify(field)\n  var pattern = /\\[([^\\[\\]\"]+)\\]/\n  while (pattern.test(field)) field = field.replace(pattern, '.\"+$1+\"')\n  return field\n}\n\nvar types = {}\n\ntypes.any = function() {\n  return 'true'\n}\n\ntypes.null = function(name) {\n  return name+' === null'\n}\n\ntypes.boolean = function(name) {\n  return 'typeof '+name+' === \"boolean\"'\n}\n\ntypes.array = function(name) {\n  return 'Array.isArray('+name+')'\n}\n\ntypes.object = function(name) {\n  return 'typeof '+name+' === \"object\" && '+name+' && !Array.isArray('+name+')'\n}\n\ntypes.number = function(name) {\n  return 'typeof '+name+' === \"number\"'\n}\n\ntypes.integer = function(name) {\n  return 'typeof '+name+' === \"number\" && (Math.floor('+name+') === '+name+' || '+name+' > 9007199254740992 || '+name+' < -9007199254740992)'\n}\n\ntypes.string = function(name) {\n  return 'typeof '+name+' === \"string\"'\n}\n\nvar unique = function(array) {\n  var list = []\n  for (var i = 0; i < array.length; i++) {\n    list.push(typeof array[i] === 'object' ? JSON.stringify(array[i]) : array[i])\n  }\n  for (var i = 1; i < list.length; i++) {\n    if (list.indexOf(list[i]) !== i) return false\n  }\n  return true\n}\n\nvar isMultipleOf = function(name, multipleOf) {\n  var res;\n  var factor = ((multipleOf | 0) !== multipleOf) ? Math.pow(10, multipleOf.toString().split('.').pop().length) : 1\n  if (factor > 1) {\n    var factorName = ((name | 0) !== name) ? Math.pow(10, name.toString().split('.').pop().length) : 1\n    if (factorName > factor) res = true\n    else res = Math.round(factor * name) % (factor * multipleOf)\n  }\n  else res = name % multipleOf;\n  return !res;\n}\n\nvar toType = function(node) {\n  return node.type\n}\n\nvar compile = function(schema, cache, root, reporter, opts) {\n  var fmts = opts ? xtend(formats, opts.formats) : formats\n  var scope = {unique:unique, formats:fmts, isMultipleOf:isMultipleOf}\n  var verbose = opts ? !!opts.verbose : false;\n  var greedy = opts && opts.greedy !== undefined ?\n    opts.greedy : false;\n\n  var syms = {}\n  var gensym = function(name) {\n    return name+(syms[name] = (syms[name] || 0)+1)\n  }\n\n  var reversePatterns = {}\n  var patterns = function(p) {\n    if (reversePatterns[p]) return reversePatterns[p]\n    var n = gensym('pattern')\n    scope[n] = new RegExp(p)\n    reversePatterns[p] = n\n    return n\n  }\n\n  var vars = ['i','j','k','l','m','n','o','p','q','r','s','t','u','v','x','y','z']\n  var genloop = function() {\n    var v = vars.shift()\n    vars.push(v+v[0])\n    return v\n  }\n\n  var visit = function(name, node, reporter, filter) {\n    var properties = node.properties\n    var type = node.type\n    var tuple = false\n\n    if (Array.isArray(node.items)) { // tuple type\n      properties = {}\n      node.items.forEach(function(item, i) {\n        properties[i] = item\n      })\n      type = 'array'\n      tuple = true\n    }\n\n    var indent = 0\n    var error = function(msg, prop, value) {\n      validate('errors++')\n      if (reporter === true) {\n        validate('if (validate.errors === null) validate.errors = []')\n        if (verbose) {\n          validate('validate.errors.push({field:%s,message:%s,value:%s,type:%s})', formatName(prop || name), JSON.stringify(msg), value || name, JSON.stringify(type))\n        } else {\n          validate('validate.errors.push({field:%s,message:%s})', formatName(prop || name), JSON.stringify(msg))\n        }\n      }\n    }\n\n    if (node.required === true) {\n      indent++\n      validate('if (%s === undefined) {', name)\n      error('is required')\n      validate('} else {')\n    } else {\n      indent++\n      validate('if (%s !== undefined) {', name)\n    }\n\n    var valid = [].concat(type)\n      .map(function(t) {\n        return types[t || 'any'](name)\n      })\n      .join(' || ') || 'true'\n\n    if (valid !== 'true') {\n      indent++\n      validate('if (!(%s)) {', valid)\n      error('is the wrong type')\n      validate('} else {')\n    }\n\n    if (tuple) {\n      if (node.additionalItems === false) {\n        validate('if (%s.length > %d) {', name, node.items.length)\n        error('has additional items')\n        validate('}')\n      } else if (node.additionalItems) {\n        var i = genloop()\n        validate('for (var %s = %d; %s < %s.length; %s++) {', i, node.items.length, i, name, i)\n        visit(name+'['+i+']', node.additionalItems, reporter, filter)\n        validate('}')\n      }\n    }\n\n    if (node.format && fmts[node.format]) {\n      if (type !== 'string' && formats[node.format]) validate('if (%s) {', types.string(name))\n      var n = gensym('format')\n      scope[n] = fmts[node.format]\n\n      if (typeof scope[n] === 'function') validate('if (!%s(%s)) {', n, name)\n      else validate('if (!%s.test(%s)) {', n, name)\n      error('must be '+node.format+' format')\n      validate('}')\n      if (type !== 'string' && formats[node.format]) validate('}')\n    }\n\n    if (Array.isArray(node.required)) {\n      var isUndefined = function(req) {\n        return genobj(name, req) + ' === undefined'\n      }\n\n      var checkRequired = function (req) {\n        var prop = genobj(name, req);\n        validate('if (%s === undefined) {', prop)\n        error('is required', prop)\n        validate('missing++')\n        validate('}')\n      }\n      validate('if ((%s)) {', type !== 'object' ? types.object(name) : 'true')\n      validate('var missing = 0')\n      node.required.map(checkRequired)\n      validate('}');\n      if (!greedy) {\n        validate('if (missing === 0) {')\n        indent++\n      }\n    }\n\n    if (node.uniqueItems) {\n      if (type !== 'array') validate('if (%s) {', types.array(name))\n      validate('if (!(unique(%s))) {', name)\n      error('must be unique')\n      validate('}')\n      if (type !== 'array') validate('}')\n    }\n\n    if (node.enum) {\n      var complex = node.enum.some(function(e) {\n        return typeof e === 'object'\n      })\n\n      var compare = complex ?\n        function(e) {\n          return 'JSON.stringify('+name+')'+' !== JSON.stringify('+JSON.stringify(e)+')'\n        } :\n        function(e) {\n          return name+' !== '+JSON.stringify(e)\n        }\n\n      validate('if (%s) {', node.enum.map(compare).join(' && ') || 'false')\n      error('must be an enum value')\n      validate('}')\n    }\n\n    if (node.dependencies) {\n      if (type !== 'object') validate('if (%s) {', types.object(name))\n\n      Object.keys(node.dependencies).forEach(function(key) {\n        var deps = node.dependencies[key]\n        if (typeof deps === 'string') deps = [deps]\n\n        var exists = function(k) {\n          return genobj(name, k) + ' !== undefined'\n        }\n\n        if (Array.isArray(deps)) {\n          validate('if (%s !== undefined && !(%s)) {', genobj(name, key), deps.map(exists).join(' && ') || 'true')\n          error('dependencies not set')\n          validate('}')\n        }\n        if (typeof deps === 'object') {\n          validate('if (%s !== undefined) {', genobj(name, key))\n          visit(name, deps, reporter, filter)\n          validate('}')\n        }\n      })\n\n      if (type !== 'object') validate('}')\n    }\n\n    if (node.additionalProperties || node.additionalProperties === false) {\n      if (type !== 'object') validate('if (%s) {', types.object(name))\n\n      var i = genloop()\n      var keys = gensym('keys')\n\n      var toCompare = function(p) {\n        return keys+'['+i+'] !== '+JSON.stringify(p)\n      }\n\n      var toTest = function(p) {\n        return '!'+patterns(p)+'.test('+keys+'['+i+'])'\n      }\n\n      var additionalProp = Object.keys(properties || {}).map(toCompare)\n        .concat(Object.keys(node.patternProperties || {}).map(toTest))\n        .join(' && ') || 'true'\n\n      validate('var %s = Object.keys(%s)', keys, name)\n        ('for (var %s = 0; %s < %s.length; %s++) {', i, i, keys, i)\n          ('if (%s) {', additionalProp)\n\n      if (node.additionalProperties === false) {\n        if (filter) validate('delete %s', name+'['+keys+'['+i+']]')\n        error('has additional properties', null, JSON.stringify(name+'.') + ' + ' + keys + '['+i+']')\n      } else {\n        visit(name+'['+keys+'['+i+']]', node.additionalProperties, reporter, filter)\n      }\n\n      validate\n          ('}')\n        ('}')\n\n      if (type !== 'object') validate('}')\n    }\n\n    if (node.$ref) {\n      var sub = get(root, opts && opts.schemas || {}, node.$ref)\n      if (sub) {\n        var fn = cache[node.$ref]\n        if (!fn) {\n          cache[node.$ref] = function proxy(data) {\n            return fn(data)\n          }\n          fn = compile(sub, cache, root, false, opts)\n        }\n        var n = gensym('ref')\n        scope[n] = fn\n        validate('if (!(%s(%s))) {', n, name)\n        error('referenced schema does not match')\n        validate('}')\n      }\n    }\n\n    if (node.not) {\n      var prev = gensym('prev')\n      validate('var %s = errors', prev)\n      visit(name, node.not, false, filter)\n      validate('if (%s === errors) {', prev)\n      error('negative schema matches')\n      validate('} else {')\n        ('errors = %s', prev)\n      ('}')\n    }\n\n    if (node.items && !tuple) {\n      if (type !== 'array') validate('if (%s) {', types.array(name))\n\n      var i = genloop()\n      validate('for (var %s = 0; %s < %s.length; %s++) {', i, i, name, i)\n      visit(name+'['+i+']', node.items, reporter, filter)\n      validate('}')\n\n      if (type !== 'array') validate('}')\n    }\n\n    if (node.patternProperties) {\n      if (type !== 'object') validate('if (%s) {', types.object(name))\n      var keys = gensym('keys')\n      var i = genloop()\n      validate\n        ('var %s = Object.keys(%s)', keys, name)\n        ('for (var %s = 0; %s < %s.length; %s++) {', i, i, keys, i)\n\n      Object.keys(node.patternProperties).forEach(function(key) {\n        var p = patterns(key)\n        validate('if (%s.test(%s)) {', p, keys+'['+i+']')\n        visit(name+'['+keys+'['+i+']]', node.patternProperties[key], reporter, filter)\n        validate('}')\n      })\n\n      validate('}')\n      if (type !== 'object') validate('}')\n    }\n\n    if (node.pattern) {\n      var p = patterns(node.pattern)\n      if (type !== 'string') validate('if (%s) {', types.string(name))\n      validate('if (!(%s.test(%s))) {', p, name)\n      error('pattern mismatch')\n      validate('}')\n      if (type !== 'string') validate('}')\n    }\n\n    if (node.allOf) {\n      node.allOf.forEach(function(sch) {\n        visit(name, sch, reporter, filter)\n      })\n    }\n\n    if (node.anyOf && node.anyOf.length) {\n      var prev = gensym('prev')\n\n      node.anyOf.forEach(function(sch, i) {\n        if (i === 0) {\n          validate('var %s = errors', prev)\n        } else {\n          validate('if (errors !== %s) {', prev)\n            ('errors = %s', prev)\n        }\n        visit(name, sch, false, false)\n      })\n      node.anyOf.forEach(function(sch, i) {\n        if (i) validate('}')\n      })\n      validate('if (%s !== errors) {', prev)\n      error('no schemas match')\n      validate('}')\n    }\n\n    if (node.oneOf && node.oneOf.length) {\n      var prev = gensym('prev')\n      var passes = gensym('passes')\n\n      validate\n        ('var %s = errors', prev)\n        ('var %s = 0', passes)\n\n      node.oneOf.forEach(function(sch, i) {\n        visit(name, sch, false, false)\n        validate('if (%s === errors) {', prev)\n          ('%s++', passes)\n        ('} else {')\n          ('errors = %s', prev)\n        ('}')\n      })\n\n      validate('if (%s !== 1) {', passes)\n      error('no (or more than one) schemas match')\n      validate('}')\n    }\n\n    if (node.multipleOf !== undefined) {\n      if (type !== 'number' && type !== 'integer') validate('if (%s) {', types.number(name))\n\n      validate('if (!isMultipleOf(%s, %d)) {', name, node.multipleOf)\n\n      error('has a remainder')\n      validate('}')\n\n      if (type !== 'number' && type !== 'integer') validate('}')\n    }\n\n    if (node.maxProperties !== undefined) {\n      if (type !== 'object') validate('if (%s) {', types.object(name))\n\n      validate('if (Object.keys(%s).length > %d) {', name, node.maxProperties)\n      error('has more properties than allowed')\n      validate('}')\n\n      if (type !== 'object') validate('}')\n    }\n\n    if (node.minProperties !== undefined) {\n      if (type !== 'object') validate('if (%s) {', types.object(name))\n\n      validate('if (Object.keys(%s).length < %d) {', name, node.minProperties)\n      error('has less properties than allowed')\n      validate('}')\n\n      if (type !== 'object') validate('}')\n    }\n\n    if (node.maxItems !== undefined) {\n      if (type !== 'array') validate('if (%s) {', types.array(name))\n\n      validate('if (%s.length > %d) {', name, node.maxItems)\n      error('has more items than allowed')\n      validate('}')\n\n      if (type !== 'array') validate('}')\n    }\n\n    if (node.minItems !== undefined) {\n      if (type !== 'array') validate('if (%s) {', types.array(name))\n\n      validate('if (%s.length < %d) {', name, node.minItems)\n      error('has less items than allowed')\n      validate('}')\n\n      if (type !== 'array') validate('}')\n    }\n\n    if (node.maxLength !== undefined) {\n      if (type !== 'string') validate('if (%s) {', types.string(name))\n\n      validate('if (%s.length > %d) {', name, node.maxLength)\n      error('has longer length than allowed')\n      validate('}')\n\n      if (type !== 'string') validate('}')\n    }\n\n    if (node.minLength !== undefined) {\n      if (type !== 'string') validate('if (%s) {', types.string(name))\n\n      validate('if (%s.length < %d) {', name, node.minLength)\n      error('has less length than allowed')\n      validate('}')\n\n      if (type !== 'string') validate('}')\n    }\n\n    if (node.minimum !== undefined) {\n      if (type !== 'number' && type !== 'integer') validate('if (%s) {', types.number(name))\n\n      validate('if (%s %s %d) {', name, node.exclusiveMinimum ? '<=' : '<', node.minimum)\n      error('is less than minimum')\n      validate('}')\n\n      if (type !== 'number' && type !== 'integer') validate('}')\n    }\n\n    if (node.maximum !== undefined) {\n      if (type !== 'number' && type !== 'integer') validate('if (%s) {', types.number(name))\n\n      validate('if (%s %s %d) {', name, node.exclusiveMaximum ? '>=' : '>', node.maximum)\n      error('is more than maximum')\n      validate('}')\n\n      if (type !== 'number' && type !== 'integer') validate('}')\n    }\n\n    if (properties) {\n      Object.keys(properties).forEach(function(p) {\n        if (Array.isArray(type) && type.indexOf('null') !== -1) validate('if (%s !== null) {', name)\n\n        visit(genobj(name, p), properties[p], reporter, filter)\n\n        if (Array.isArray(type) && type.indexOf('null') !== -1) validate('}')\n      })\n    }\n\n    while (indent--) validate('}')\n  }\n\n  var validate = genfun\n    ('function validate(data) {')\n      // Since undefined is not a valid JSON value, we coerce to null and other checks will catch this\n      ('if (data === undefined) data = null')\n      ('validate.errors = null')\n      ('var errors = 0')\n\n  visit('data', schema, reporter, opts && opts.filter)\n\n  validate\n      ('return errors === 0')\n    ('}')\n\n  validate = validate.toFunction(scope)\n  validate.errors = null\n\n  if (Object.defineProperty) {\n    Object.defineProperty(validate, 'error', {\n      get: function() {\n        if (!validate.errors) return ''\n        return validate.errors.map(function(err) {\n          return err.field + ' ' + err.message;\n        }).join('\\n')\n      }\n    })\n  }\n\n  validate.toJSON = function() {\n    return schema\n  }\n\n  return validate\n}\n\nmodule.exports = function(schema, opts) {\n  if (typeof schema === 'string') schema = JSON.parse(schema)\n  return compile(schema, {}, schema, true, opts)\n}\n\nmodule.exports.filter = function(schema, opts) {\n  var validate = module.exports(schema, xtend(opts, {filter: true}))\n  return function(sch) {\n    validate(sch)\n    return sch\n  }\n}\n"]}
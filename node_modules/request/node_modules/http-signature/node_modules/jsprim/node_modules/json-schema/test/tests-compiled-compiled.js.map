{"version":3,"sources":["tests-compiled.js"],"names":[],"mappings":"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","file":"tests-compiled-compiled.js","sourcesContent":["var assert = require('assert');\nvar vows = require('vows');\nvar path = require('path');\nvar fs = require('fs');\n\nvar validate = require('../lib/validate').validate;\n\nvar revision = 'draft-03';\nvar schemaRoot = path.join(__dirname, '..', revision);\nvar schemaNames = ['schema', 'hyper-schema', 'links', 'json-ref'];\nvar schemas = {};\n\nschemaNames.forEach(function (name) {\n    var file = path.join(schemaRoot, name);\n    schemas[name] = loadSchema(file);\n});\n\nschemaNames.forEach(function (name) {\n    var s,\n        n = name + '-nsd',\n        f = path.join(schemaRoot, name);\n    schemas[n] = loadSchema(f);\n    s = schemas[n];\n    delete s['$schema'];\n});\n\nfunction loadSchema(path) {\n    var data = fs.readFileSync(path, 'utf-8');\n    var schema = JSON.parse(data);\n    return schema;\n}\n\nfunction resultIsValid() {\n    return function (result) {\n        assert.isObject(result);\n        //assert.isBoolean(result.valid);\n        assert.equal(typeof result.valid, 'boolean');\n        assert.isArray(result.errors);\n        for (var i = 0; i < result.errors.length; i++) {\n            assert.notEqual(result.errors[i], null, 'errors[' + i + '] is null');\n        }\n    };\n}\n\nfunction assertValidates(doc, schema) {\n    var context = {};\n\n    context[': validate(' + doc + ', ' + schema + ')'] = {\n        topic: validate(schemas[doc], schemas[schema]),\n        'returns valid result': resultIsValid(),\n        'with valid=true': function (result) {\n            assert.equal(result.valid, true);\n        },\n        'and no errors': function (result) {\n            // XXX work-around for bug in vows: [null] chokes it\n            if (result.errors[0] == null) assert.fail('(errors contains null)');\n            assert.length(result.errors, 0);\n        }\n    };\n\n    return context;\n}\n\nfunction assertSelfValidates(doc) {\n    var context = {};\n\n    context[': validate(' + doc + ')'] = {\n        topic: validate(schemas[doc]),\n        'returns valid result': resultIsValid(),\n        'with valid=true': function (result) {\n            assert.equal(result.valid, true);\n        },\n        'and no errors': function (result) {\n            assert.length(result.errors, 0);\n        }\n    };\n\n    return context;\n}\n\nvar suite = vows.describe('JSON Schema').addBatch({\n    'Core-NSD self-validates': assertSelfValidates('schema-nsd'),\n    'Core-NSD/Core-NSD': assertValidates('schema-nsd', 'schema-nsd'),\n    'Core-NSD/Core': assertValidates('schema-nsd', 'schema'),\n\n    'Core self-validates': assertSelfValidates('schema'),\n    'Core/Core': assertValidates('schema', 'schema'),\n\n    'Hyper-NSD self-validates': assertSelfValidates('hyper-schema-nsd'),\n    'Hyper self-validates': assertSelfValidates('hyper-schema'),\n    'Hyper/Hyper': assertValidates('hyper-schema', 'hyper-schema'),\n    'Hyper/Core': assertValidates('hyper-schema', 'schema'),\n\n    'Links-NSD self-validates': assertSelfValidates('links-nsd'),\n    'Links self-validates': assertSelfValidates('links'),\n    'Links/Hyper': assertValidates('links', 'hyper-schema'),\n    'Links/Core': assertValidates('links', 'schema'),\n\n    'Json-Ref self-validates': assertSelfValidates('json-ref'),\n    'Json-Ref/Hyper': assertValidates('json-ref', 'hyper-schema'),\n    'Json-Ref/Core': assertValidates('json-ref', 'schema')\n}).export(module);\n\n//# sourceMappingURL=tests-compiled.js.map"]}
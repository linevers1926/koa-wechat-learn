{"version":3,"sources":["verror.js"],"names":[],"mappings":"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","file":"verror-compiled.js","sourcesContent":["/*\n * verror.js: richer JavaScript errors\n */\n\nvar mod_assert = require('assert');\nvar mod_util = require('util');\n\nvar mod_extsprintf = require('extsprintf');\n\n/*\n * Public interface\n */\nexports.VError = VError;\nexports.WError = WError;\nexports.MultiError = MultiError;\n\n/*\n * Like JavaScript's built-in Error class, but supports a \"cause\" argument and a\n * printf-style message.  The cause argument can be null.\n */\nfunction VError(options)\n{\n\tvar args, causedBy, ctor, tailmsg;\n\n\tif (options instanceof Error || typeof (options) === 'object') {\n\t\targs = Array.prototype.slice.call(arguments, 1);\n\t} else {\n\t\targs = Array.prototype.slice.call(arguments, 0);\n\t\toptions = undefined;\n\t}\n\n\ttailmsg = args.length > 0 ?\n\t    mod_extsprintf.sprintf.apply(null, args) : '';\n\tthis.jse_shortmsg = tailmsg;\n\tthis.jse_summary = tailmsg;\n\n\tif (options) {\n\t\tcausedBy = options.cause;\n\n\t\tif (!causedBy || !(options.cause instanceof Error))\n\t\t\tcausedBy = options;\n\n\t\tif (causedBy && (causedBy instanceof Error)) {\n\t\t\tthis.jse_cause = causedBy;\n\t\t\tthis.jse_summary += ': ' + causedBy.message;\n\t\t}\n\t}\n\n\tthis.message = this.jse_summary;\n\tError.call(this, this.jse_summary);\n\n\tif (Error.captureStackTrace) {\n\t\tctor = options ? options.constructorOpt : undefined;\n\t\tctor = ctor || arguments.callee;\n\t\tError.captureStackTrace(this, ctor);\n\t}\n}\n\nmod_util.inherits(VError, Error);\nVError.prototype.name = 'VError';\n\nVError.prototype.toString = function ve_toString()\n{\n\tvar str = (this.hasOwnProperty('name') && this.name ||\n\t\tthis.constructor.name || this.constructor.prototype.name);\n\tif (this.message)\n\t\tstr += ': ' + this.message;\n\n\treturn (str);\n};\n\nVError.prototype.cause = function ve_cause()\n{\n\treturn (this.jse_cause);\n};\n\n\n/*\n * Represents a collection of errors for the purpose of consumers that generally\n * only deal with one error.  Callers can extract the individual errors\n * contained in this object, but may also just treat it as a normal single\n * error, in which case a summary message will be printed.\n */\nfunction MultiError(errors)\n{\n\tmod_assert.ok(errors.length > 0);\n\tthis.ase_errors = errors;\n\n\tVError.call(this, errors[0], 'first of %d error%s',\n\t    errors.length, errors.length == 1 ? '' : 's');\n}\n\nmod_util.inherits(MultiError, VError);\n\n\n\n/*\n * Like JavaScript's built-in Error class, but supports a \"cause\" argument which\n * is wrapped, not \"folded in\" as with VError.\tAccepts a printf-style message.\n * The cause argument can be null.\n */\nfunction WError(options)\n{\n\tError.call(this);\n\n\tvar args, cause, ctor;\n\tif (typeof (options) === 'object') {\n\t\targs = Array.prototype.slice.call(arguments, 1);\n\t} else {\n\t\targs = Array.prototype.slice.call(arguments, 0);\n\t\toptions = undefined;\n\t}\n\n\tif (args.length > 0) {\n\t\tthis.message = mod_extsprintf.sprintf.apply(null, args);\n\t} else {\n\t\tthis.message = '';\n\t}\n\n\tif (options) {\n\t\tif (options instanceof Error) {\n\t\t\tcause = options;\n\t\t} else {\n\t\t\tcause = options.cause;\n\t\t\tctor = options.constructorOpt;\n\t\t}\n\t}\n\n\tError.captureStackTrace(this, ctor || this.constructor);\n\tif (cause)\n\t\tthis.cause(cause);\n\n}\n\nmod_util.inherits(WError, Error);\nWError.prototype.name = 'WError';\n\n\nWError.prototype.toString = function we_toString()\n{\n\tvar str = (this.hasOwnProperty('name') && this.name ||\n\t\tthis.constructor.name || this.constructor.prototype.name);\n\tif (this.message)\n\t\tstr += ': ' + this.message;\n\tif (this.we_cause && this.we_cause.message)\n\t\tstr += '; caused by ' + this.we_cause.toString();\n\n\treturn (str);\n};\n\nWError.prototype.cause = function we_cause(c)\n{\n\tif (c instanceof Error)\n\t\tthis.we_cause = c;\n\n\treturn (this.we_cause);\n};\n"]}